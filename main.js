(()=>{"use strict";var t={576:(t,e,o)=>{t.exports=o.p+"0863e5bc26221680f1e2.svg"}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var c=e[n]={exports:{}};return t[n](c,c.exports,o),c.exports}o.m=t,o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.p="",o.b=document.baseURI||self.location.href,(()=>{function t(t,e){return fetch("https://nomoreparties.co/v1/wff-cohort-10/cards/likes/".concat(t),{method:e,headers:{authorization:"2861e698-c93e-4af8-bc74-4f3b70e5bd6e","Content-Type":"application/json"}}).catch((function(t){console.log(t)}))}function e(t,e){return fetch("https://nomoreparties.co/v1/wff-cohort-10/cards",{method:"GET",headers:{authorization:"2861e698-c93e-4af8-bc74-4f3b70e5bd6e"}}).then((function(t){return t.json()})).then((function(o){o.forEach((function(o){t===o._id&&(e.textContent=o.likes.length)}))})).catch((function(t){console.log(t)}))}function n(){return fetch("https://nomoreparties.co/v1/wff-cohort-10/users/me",{method:"GET",headers:{authorization:"2861e698-c93e-4af8-bc74-4f3b70e5bd6e"}}).then((function(t){return t.json()})).then((function(t){return t._id}))}function r(){return fetch("https://nomoreparties.co/v1/wff-cohort-10/cards",{method:"GET",headers:{authorization:"2861e698-c93e-4af8-bc74-4f3b70e5bd6e"}}).then((function(t){return t.json()})).then((function(t){return t}))}function c(t,e){t.target.closest(".card").remove(),function(){fetch("https://nomoreparties.co/v1/wff-cohort-10/cards/".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""),{method:"DELETE",headers:{authorization:"2861e698-c93e-4af8-bc74-4f3b70e5bd6e","Content-Type":"application/json"}})}(e)}function i(o,n,r){o.target.classList.contains("card__like-button_is-active")?t(n,"DELETE").then((function(t){t.ok&&e(n,r)})):t(n,"PUT").then((function(t){t.ok&&e(n,r)})),o.target.classList.toggle("card__like-button_is-active")}function a(t,e,o,n,r){var c=document.querySelector("#card-template").content.querySelector(".places__item").cloneNode(!0),i=c.querySelector(".card__image"),a=c.querySelector(".card__title"),u=c.querySelector(".card__delete-button"),s=c.querySelector(".like-count"),l=c.querySelector(".card__like-button");return i.setAttribute("src",t.link),i.setAttribute("alt","Картинка местности ".concat(t.name)),a.textContent=t.name,t.likes.forEach((function(t){t._id===r&&l.classList.add("card__like-button_is-active")})),s.textContent=t.likes.length,l.addEventListener("click",(function(e){o(e,t._id,s)})),i.addEventListener("click",(function(){return n(t)})),t.owner._id!==r?c.querySelector(".card__delete-button").remove():u.addEventListener("click",(function(o){e(o,t._id)})),c}document.querySelector(".places__list");var u={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},s=function(t,e,o){l(t)?(e.disabled=!0,e.classList.add(o.inactiveButtonClass)):(e.disabled=!1,e.classList.remove(o.inactiveButtonClass))},l=function(t){return t.some((function(t){return!t.validity.valid}))},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;"edit-profile"!==t.getAttribute("name")&&t.reset();var o=Array.from(t.querySelectorAll(e.inputSelector)),n=t.querySelector(e.submitButtonSelector);o.forEach((function(o){n.disabled=!0,n.classList.add(e.inactiveButtonClass);var r=t.querySelector(".".concat(o.id,"-error"));o.classList.remove(e.inputErrorClass),r.classList.remove(e.errorClass),r.textContent=""}))};function d(t){t.classList.add("popup_is-opened"),document.addEventListener("keydown",m)}function f(t){t.classList.remove("popup_is-opened"),document.removeEventListener("keydown",m)}function m(t){"Escape"===t.key&&f(document.querySelector(".popup_is-opened"))}var h,v,_,b=new URL(o(576),o.b),y=document.querySelector(".places__list"),S=document.forms["edit-profile"],g=document.forms["new-place"],C=document.forms["new-avatar"],q=document.querySelector(".profile__title"),E=document.querySelector(".profile__description"),k=document.querySelector(".profile__image"),L=document.querySelector(".profile__edit-button"),x=document.querySelector(".profile__add-button"),w=document.querySelector(".popup_type_new-avatar"),A=document.querySelector(".popup_type_edit"),T=document.querySelector(".popup_type_new-card"),j=document.querySelector(".popup_type_image"),z=j.querySelector(".popup__image"),B=j.querySelector(".popup__caption");function P(t){return new Promise((function(e,o){var n=new Image;n.onload=function(){e(t)},n.onerror=function(){o(t)},n.src=t}))}function O(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Promise.all(t).then((function(t){var o=t[0],n=t[1];e?P(t[0][0].link).then((function(){y.prepend(a(t[0][0],c,i,D,n))})).catch((function(t){console.log(t)})):o.forEach((function(t){P(t.link).then((function(){y.append(a(t,c,i,D,n))})).catch((function(t){console.log(t)}))}))}))}function D(t){z.setAttribute("src",t.link),z.setAttribute("alt","Картинка местности ".concat(t.name)),B.textContent=t.name,d(j)}document.querySelector(".logo").setAttribute("src",b),h=q,v=E,_=k,fetch("https://nomoreparties.co/v1/wff-cohort-10/users/me",{method:"GET",headers:{authorization:"2861e698-c93e-4af8-bc74-4f3b70e5bd6e"}}).then((function(t){return t.json()})).then((function(t){h.textContent=t.name,v.textContent=t.about,_.setAttribute("style","background-image: url(".concat(t.avatar,")"))})).catch((function(t){console.log("Ошибка. Запрос не выполнен")})),document.querySelector(".logo").setAttribute("src",b),O([r(),n()]),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;Array.from(document.querySelectorAll(t.formSelector)).forEach((function(e){!function(t,e){var o=Array.from(t.querySelectorAll(e.inputSelector)),n=t.querySelector(e.submitButtonSelector);s(o,n,e),o.forEach((function(r){r.addEventListener("input",(function(){!function(t,e,o){e.validity.patternMismatch?e.setCustomValidity(e.dataset.errorMessage):e.setCustomValidity(""),e.validity.valid?function(t,e,o){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.remove(o.inputErrorClass),n.classList.remove(o.errorClass),n.textContent=""}(t,e,o):function(t,e,o,n){var r=t.querySelector(".".concat(e.id,"-error"));e.classList.add(n.inputErrorClass),r.textContent=o,r.classList.add(n.errorClass)}(t,e,e.validationMessage,o)}(t,r,e),s(o,n,e)}))}))}(e,t)}))}(),document.querySelectorAll(".popup").forEach((function(t){t.classList.add("popup_is-animated"),t.addEventListener("mousedown",(function(e){(e.target.classList.contains("popup_is-opened")||e.target.classList.contains("popup__close"))&&(f(t),t.classList.contains("popup_type_image")||p(t.querySelector(".popup__form")))}))})),S.addEventListener("submit",(function(t){t.preventDefault(),q.textContent=S.name.value,E.textContent=S.description.value;var e,o,n=t.target.querySelector(".popup__button");n.textContent="Сохранение...",(e=q.textContent,o=E.textContent,fetch("https://nomoreparties.co/v1/wff-cohort-10/users/me",{method:"PATCH",headers:{authorization:"2861e698-c93e-4af8-bc74-4f3b70e5bd6e","Content-Type":"application/json"},body:JSON.stringify({name:e,about:o})})).then((function(t){t.ok&&(n.textContent="Сохранить")})),p(t.target),f(t.target.closest(".popup"))})),g.addEventListener("submit",(function(t){t.preventDefault();var e=t.target.querySelector(".popup__button"),o={name:g["place-name"].value,link:g.link.value};e.textContent="Сохранение...",function(t,e){return fetch("https://nomoreparties.co/v1/wff-cohort-10/cards",{method:"POST",headers:{authorization:"2861e698-c93e-4af8-bc74-4f3b70e5bd6e","Content-Type":"application/json"},body:JSON.stringify({name:t,link:e})}).catch((function(t){console.log(t)}))}(o.name,o.link).then((function(o){o.ok&&(O([r(),n()],!0),f(t.target.closest(".popup")),e.textContent="Сохранить")})),p(t.target)})),C.addEventListener("submit",(function(t){t.preventDefault();var e=C.link.value;k.setAttribute("style","background-image: url(".concat(e,")"));var o,n=t.target.querySelector(".popup__button");n.textContent="Сохранение...",(o=e,fetch("https://nomoreparties.co/v1/wff-cohort-10/users/me/avatar",{method:"PATCH",headers:{authorization:"2861e698-c93e-4af8-bc74-4f3b70e5bd6e","Content-Type":"application/json"},body:JSON.stringify({avatar:o})})).then((function(t){t.ok&&(n.textContent="Сохранить")})),p(t.target),f(t.target.closest(".popup"))})),L.addEventListener("click",(function(){S.name.value=q.textContent,S.description.value=E.textContent,d(A)})),k.addEventListener("click",(function(){d(w)})),x.addEventListener("click",(function(){return d(T)}))})()})();